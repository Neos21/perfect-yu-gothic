<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Perfect Yu Gothic</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="icon" href="/favicon-192x192.png" sizes="192x192" type="image/png">
    <link rel="apple-touch-icon" href="/apple-touch-icon-152x152.png" sizes="152x152">
  </head>
  <body>

<section>
  <h1>Perfect Yu Gothic</h1>
  <p>Windows 游ゴシックを綺麗に表示するための試験場。</p>
  <ul>
    <li>初版作成日 : <time>2020-01-17</time></li>
    <li>最終更新日 : <time>2020-01-17</time></li>
  </ul>
  
  <section id="table-of-contents">
    <h2>Table of Contents</h2>
    <ul>
      <li><a href="#testing-pages">検証ページ</a></li>
      <li><a href="#problem">游ゴシックフォントに関する問題まとめ</a></li>
      <li><a href="#best-answer">現状の最善案</a></li>
      <li><a href="#other-answers">副作用がある他の対策</a></li>
      <li><a href="#client-side">クライアントサイドでできる対策</a></li>
      <li><a href="#old-info">過去情報</a></li>
      <li><a href="#miscarry">「游ゴシック Medium」を諦める案</a></li>
      <li><a href="#links">Links</a></li>
    </ul>
  </section>
  
  <section id="testing-pages">
    <h2>検証ページ</h2>
    <dl>
      <dt><a href="testing-01.html">Testing 01</a> (初版 <time>2020-01-17</time>・最終 <time>2020-01-17</time>)</dt>
      <dd>
        <p>Full Name や PostScript 名を、<code>@font-face</code> で指定してみたり、<code>font-family</code> で直接指定してみたりした。</p>
      </dd>
      <dt><a href="testing-02.html">Testing 02</a> (初版 <time>2020-01-17</time>・最終 <time>2020-01-17</time>)</dt>
      <dd>
        <p><code>@font-face</code> 指定の詳細チェック。</p>
      </dd>
    </dl>
  </section>
  
  <section id="problem">
    <h2>游ゴシックフォントに関する問題まとめ</h2>
    <ul>
      <li>iOS・Android : 游ゴシックフォントが標準搭載されていないので対象外。</li>
      <li>
        MacOS : 「游ゴシック体 Medium」「游ゴシック体 Bold」のみが標準搭載されており、<code>font-family: YuGothic</code> (「游ゴシック体」) を指定するだけで游ゴシックが綺麗に表示される。対策不要。
        <ul>
          <li>MacOS 向けの <code>font-family</code> の指定値は <code>YuGothic, &quot;游ゴシック体&quot;</code> で、Windows 向けの指定値 <code>&quot;Yu Gothic&quot;, &quot;游ゴシック&quot;</code> とは異なる点に留意。</li>
          <li>MacOS には、Windows でフォントがかすれる原因となる「Regular」ウェイトが搭載されていないので問題が起こらない。</li>
        </ul>
      </li>
      <li>
        Windows : 単純に <code>font-family: &quot;Yu Gothic&quot;</code> (「游ゴシック」) と指定すると、<strong>「游ゴシック Regular」</strong>という細いウェイトが適用されてしまい、游ゴシックが薄く・かすれて表示されてしまう。
        <ul>
          <li>特に、Chromium ベースのブラウザ (Chrome や Chromium Edge) で「游ゴシック Regular」が適用されると、Firefox などよりも薄く表示されてしまいがち。</li>
          <li>フォントのウェイトの違いの他に、MacOS と Windows とでガンマ補正の仕組みが異なるため、同じ Medium ウェイトを指定したとしても、MacOS より Windows の方が薄く表示されがちではある。</li>
        </ul>
      </li>
    </ul>
    <p><strong>なんとかして Windows で「游ゴシック Regular」ではなく「游ゴシック Medium」を適用し</strong>、その他の OS やフォントで表示された時には悪影響を与えないよう対応したい、というのが主目的。</p>
  </section>
  
  <section id="best-answer">
    <h2>現状の最善案</h2>
    <p>まとめ中…</p>
    <!-- ★ TODO ★ -->
  </section>
  
  <section id="other-answers">
    <h2>副作用がある他の対策</h2>
    
    <section>
      <h3><code>font-family: &quot;Yu Gothic Medium&quot;</code> を指定する → 太字表示する際に「游ゴシック Bold」が使用されない</h3>
      <p><code>font-family: &quot;Yu Gothic Medium&quot;;</code></p>
      <p>と指定すると、Windows の次のブラウザ (本稿執筆時点での最新版) で、「游ゴシック Medium」が表示された。</p>
      <ul>
        <li>Chrome v79</li>
        <li>Chromium Edge v79</li>
        <li>Firefox v72</li>
      </ul>
      <p><strong>IE v11 ではこの指定が効かない</strong>のと、この <code>font-family</code> と同時に <code>font-weight: bold</code> が指定されると、「游ゴシック Bold」ではなく<strong>太字に加工された「游ゴシック Medium」</strong>が適用されてしまい、若干汚く表示されてしまうのが問題。</p>
      <p>IE v11 を無視し、太字化された「游ゴシック Medium」で表示されることを許容するならば利用できる対策。</p>
      <p>もしくは、太字にする要素にのみ <code>font-family: &quot;Yu Gothic Bold&quot;</code> を別途当てることでも対応できる。</p>
    </section>
    
    <section>
      <h3><code>font-weight: 500</code> を指定する → 「ヒラギノ角ゴ」適用時に悪影響</h3>
      <p><code>font-family: &quot;Yu Gothic&quot;; font-weight: 500;</code></p>
      <p>と指定すると「游ゴシック Medium」が適用されるようになる。この挙動自体は本稿執筆時点の主要ブラウザでも再現する。</p>
      <p>大抵は <code>font-family</code> に他のフォントもフォールバックとして記載するが、その際「ヒラギノ角ゴ (Hiragino Kaku Gothic ProN)」が適用されると、通常の文字が太字で表示されてしまう、という悪影響がある。</p>
      <ul>
        <li>参考 : <a href="http://neos21.hatenablog.com/entry/2016/02/12/081447">Corredor - Windows で游ゴシックが細く見えないようにする CSS</a></li>
      </ul>
    </section>
  </section>
  
  <section id="client-side">
    <h2>クライアントサイドでできる対策</h2>
    <p>Web ページの閲覧者の PC でできる対策。</p>
    
    <section>
      <h3>ユーザスタイルシートで <code>@font-face</code> を加工する</h3>
      <p><strong>Stylish</strong> などのブラウザ拡張機能を使用し、ユーザスタイルシートを追加する。</p>
      <p><a href="#best-answer">現状の最善案</a>で紹介しているコードをベースに、<code>&quot;Yu Gothic&quot;, &quot;游ゴシック&quot;</code> などのフォント定義に対して <code>@font-face</code> を被せ、Medium ウェイトが適用されるようにする。</p>
      <!-- ★ TODO ★ -->
      <ul>
        <li>参考 : <a href="http://neos21.hatenablog.com/entry/2018/01/15/080000">Corredor - Firefox の Stylish でできるオススメフォント設定</a> … この記事を書いた時点では、<code>@font-face</code> 指定が Chrome で効かず、Firefox のみのテクニックだったが、Chrome v79 ではこの指定が効くようになっていた。</li>
      </ul>
    </section>
    
    <section>
      <h3>ユーザスタイルシートで <code>-webkit-text-stroke-width</code> を適用する</h3>
      <p><strong>Stylish</strong> などのブラウザ拡張機能を使用し、ユーザスタイルシートを追加する。</p>
      <p><code>-webkit-text-stroke-width</code> プロパティを使用すると、テキストを太く見せられるようになる。游ゴシック以外のフォントにも適用されるため、相性の悪いフォントは滲んで見える場合があるが、「Medium ウェイトでも細く見える」のを解消するには唯一の策。</p>
      <p><code>* { -webkit-text-stroke-width: .4px !important; }</code></p>
      <p>対応しているのは Chrome、Chromium Edge、Firefox。</p>
      <p>IE はこのプロパティが効かないので、代わりに以下の <code>text-shadow</code> プロパティを使うと良い。ただし、色付きの文字が若干滲んで表示されてしまう。</p>
      <p><code>* { text-shadow: transparent 0 0 0, rgba(0, 0, 0, 0.68) 0 0 0 !important; }</code></p>
      <ul>
        <li>参考 : <a href="http://neos21.hatenablog.com/entry/2019/01/05/000629#Chrome-%E6%8B%A1%E5%BC%B5%E6%A9%9F%E8%83%BD%E3%81%A7--webkit-text-stroke-width-%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B">Corredor - Chrome 拡張機能で -webkit-text-stroke-width を指定する</a></li>
        <li>参考 : <a href="http://neos21.hatenablog.com/entry/2019/01/27/220527#text-shadow-%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F--webkit-text-stroke-width-%E3%82%92%E4%BD%BF%E3%81%86">Corredor - text-shadow ではなく -webkit-text-stroke-width を使う</a></li>
      </ul>
    </section>
    
    <section>
      <h3>レジストリを書き換えて游ゴシック Regular・Light を Medium 化する</h3>
      <p>Windows は「フォント名」と「読み込むフォントファイル」の組み合わせを、レジストリで管理している。コレを書き換えることで、「游ゴシック Regular」や「游ゴシック Light」フォントが選択されても、Medium ウェイトのフォントファイルを読み込ませるようにする。</p>
      <ul>
        <li>参考 : <a href="http://neos21.hatenablog.com/entry/2019/01/05/000629#%E3%83%AC%E3%82%B8%E3%82%B9%E3%83%88%E3%83%AA%E3%82%92%E3%82%A4%E3%82%B8%E3%81%A3%E3%81%A6-RegularLight-%E3%82%A6%E3%82%A7%E3%82%A4%E3%83%88%E3%81%AE%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%E3%82%92-Medium-%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%E3%81%AB%E7%BD%AE%E6%8F%9B%E3%81%99%E3%82%8B">Corredor - レジストリをイジって Regular・Light ウェイトのフォントを Medium フォントに置換する</a> … 手作業での差し替え手順を紹介。</li>
        <li>参考 : <a href="http://neos21.hatenablog.com/entry/2019/02/24/080000">Corredor - Windows の游ゴシック Regular・Light を Medium フォントに差し替えて太く見せる VBScript</a> … VBScript でフォントの差し替えを自動化した。</li>
      </ul>
    </section>
    
    <section>
      <h3>(Firefox のみ) <code>about: config</code> で設定変更する</h3>
      <p>Gecko ベースの Firefox では、<code>about: config</code> より各種設定を変更することで、フォントをより太く表示させられる。詳細は以下記事。</p>
      <ul>
        <li>参考 : <a href="http://neos21.hatenablog.com/entry/2018/02/13/080000">Corredor - Windows の Firefox でフォントが汚かったので直した</a></li>
      </ul>
    </section>
  </section>
  
  <section id="old-info">
    <h2>過去情報</h2>
    <p>本稿執筆時点の最新ブラウザでは確認できなくなった、過去の症状など。</p>
    <ol>
      <li>英語のフォント名ではダメで、日本語のフォント名でないと認識しないブラウザがあったりした → 本稿執筆時点では<strong>英語のフォント名のみ記載すれば OK</strong>。ただし、フォントの Full Name を認識するか、PostScript 名を認識するかはブラウザによって異なる。</li>
      <li>以前の Chrome では <code>@font-face</code> 指定が効かなくなっていた → 本稿執筆時点の最新版である Chrome v79 では動作するように戻っていた。</li>
    </ol>
    <ul>
      <li>参考 : <a href="http://neos21.hatenablog.com/entry/2017/11/12/080000">Corredor - 2018年以降はコレで決まり！Web サイトで指定するゴシック体・明朝体・等幅の font-family 設定</a> … 2017-11-12 時点の検証結果もろもろ。</li>
      <li>参考 : <a href="http://neos21.hatenablog.com/entry/2019/01/05/000629">Corredor - ウェブサイトに適用する游ゴシックフォントを見直しまくった最終解</a> … 2019-01-15 時点の検証結果もろもろ。</li>
    </ul>
    
    <section>
      <h3>過去にクライアントサイドでできた対策</h3>
      <ol>
        <li>「<a href="http://neos21.hatenablog.com/entry/2018/02/14/080000">MacType</a>」というフリーソフトでフォントにアンチエイリアスをかけられた → 本稿執筆時点の主要ブラウザ (Chrome・Chromium Edge・Firefox・IE) ではページのテキストに MacType が適用されなくなっている。</li>
      </ol>
    </section>
  </section>
  
  <section id="miscarry">
    <h2>「游ゴシック Medium」を諦める案</h2>
    <ol>
      <li><code>font-family: &quot;Yu Gothic&quot;</code> を指定し、<strong>Regular ウェイトが使用されることを許容する</strong>。</li>
      <li>游ゴシックの指定をなくし、<code>Meiryo</code> や他の Web フォントなどを使用する。</li>
    </ol>
  </section>
  
  <section id="links">
    <h2>Links</h2>
    <p><strong><a href="https://github.com/Neos21/perfect-yu-gothic">Go To GitHub Repository</a></strong></p>
    <ul>
      <li><a href="http://neo.s21.xrea.com/">Neo's World</a></li>
      <li><a href="http://neos21.hatenablog.com/">Corredor</a></li>
      <li><a href="http://neos21.hatenablog.jp/">Murga</a></li>
      <li><a href="http://neos21.hateblo.jp/">El Mylar</a></li>
      <li><a href="https://github.com/Neos21">GitHub - Neos21</a></li>
      <li><a href="https://github.com/Neos21/neos21.github.io">GitHub - Neos21 - neos21.github.io</a></li>
    </ul>
  </section>
</section>

  </body>
</html>
